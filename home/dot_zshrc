# shellcheck disable=all
# This file contains chezmoi template syntax which will be processed by chezmoi
# Autoload completions
autoload -U compinit
compinit -i

# Oh My Zsh configuration
{{- if .ohmyzsh -}}
# Path to your oh-my-zsh installation.
export ZSH="{{ .chezmoi.homeDir }}/.oh-my-zsh"

# Set name of the theme to load
ZSH_THEME="robbyrussell"

# Which plugins would you like to load?
plugins=(git)

source $ZSH/oh-my-zsh.sh
{{- end -}}

# Universal settings
export EDITOR="vim"
export LANG="en_US.UTF-8"

# Mail notifications disabled

# macOS-specific aliases
{{- if eq .chezmoi.os "darwin" -}}
alias copy="pbcopy"
alias paste="pbpaste"
alias ls="ls -G"
alias flushdns="sudo dscacheutil -flushcache"
{{- else if eq .chezmoi.os "linux" -}}
# Linux-specific aliases
alias copy="xclip -selection clipboard"
alias paste="xclip -selection clipboard -o"
alias ls="ls --color=auto"
alias open="xdg-open"
{{- end -}}

# Common aliases
alias ll="ls -la"
alias g="git"
alias cm="chezmoi"

# VS Code integration
code () { VSCODE_CWD="$PWD" open -n -b "com.microsoft.VSCode" --args $* ;}

# Terminal integration
{{- if eq .chezmoi.os "darwin" -}}
# iTerm2 integration
test -e "{{ .chezmoi.homeDir }}/.iterm2_shell_integration.zsh" && source "{{ .chezmoi.homeDir }}/.iterm2_shell_integration.zsh"
{{- else if eq .chezmoi.os "linux" -}}
# Kitty terminal integration
if [[ "$TERM" == "xterm-kitty" ]]; then
    alias icat="kitty +kitten icat"
    alias ssh="kitty +kitten ssh"
fi
{{- end -}}

# DappSnap - Automatically use the correct Node.js version
{{- if .nvm -}}
cd() { builtin cd "$@" && if [ -f ".nvmrc" ]; then nvm use; elif [ -d "node_modules" ]; then nvm use 23.4.0; fi }
# Initial setup for current directory
if [ -d "{{ .chezmoi.homeDir }}/Documents/CODE/dappsnap/node_modules" ]; then nvm use 23.4.0; fi
{{- end -}}

# Work-specific settings
{{- if .work -}}
export GIT_AUTHOR_EMAIL="{{ .email }}"
export GIT_COMMITTER_EMAIL="{{ .email }}"
export GITHUB_TOKEN=your_personal_access_token
# Add work-specific configs here
{{- end -}}

# GitHub token (if not in work mode)
{{- if not .work -}}
export GITHUB_TOKEN=your_personal_access_token
{{- end -}}



# Source modular configuration
source "{{ .chezmoi.homeDir }}/.zsh/modules.zsh"

# shellcheck disable=all
# Autoload completions
autoload -U compinit
compinit -i

{{ if .ohmyzsh -}}
# Oh My Zsh configuration
export ZSH="{{ .chezmoi.homeDir }}/.oh-my-zsh"

{{ if not .starship -}}
ZSH_THEME="robbyrussell"
{{ else -}}
ZSH_THEME=""
{{ end }}
plugins=(git)

source $ZSH/oh-my-zsh.sh
{{ end -}}

# Source modular configuration (loads core/, aliases/, functions/)
source "{{ .chezmoi.homeDir }}/.zsh/modules.zsh"

# Show system info on new terminal (not nested shells)
if [[ $- == *i* ]] && [[ ${SHLVL:-1} -le 2 ]]; then
    command -v fastfetch &>/dev/null && fastfetch
fi

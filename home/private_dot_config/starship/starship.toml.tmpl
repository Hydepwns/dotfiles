# Starship Prompt Configuration
# {{ .theme.name }} Theme (colors from chezmoi.toml)
# https://starship.rs

# General settings
add_newline = true
command_timeout = 1000

# Prompt format
format = """
$username\
$hostname\
$directory\
$git_branch\
$git_status\
$git_state\
$nodejs\
$rust\
$python\
$elixir\
$golang\
$docker_context\
$aws\
$kubernetes\
$cmd_duration\
$line_break\
$character"""

# Right prompt
right_format = """$time"""

# Character (prompt symbol)
[character]
success_symbol = "[->](bold {{ .theme.green }})"
error_symbol = "[->](bold {{ .theme.red }})"
vimcmd_symbol = "[<-](bold {{ .theme.accent }})"

# Directory
[directory]
format = "[$path]($style)[$read_only]($read_only_style) "
style = "bold {{ .theme.accent2 }}"
read_only = " [ro]"
read_only_style = "{{ .theme.red }}"
truncation_length = 3
truncate_to_repo = true
fish_style_pwd_dir_length = 1

[directory.substitutions]
"Documents" = "docs"
"Downloads" = "dl"
"CODE" = "code"

# Git branch
[git_branch]
format = "[$symbol$branch(:$remote_branch)]($style) "
symbol = ""
style = "{{ .theme.accent }}"
truncation_length = 20

# Git status
[git_status]
format = '([$all_status$ahead_behind]($style) )'
style = "{{ .theme.yellow }}"
conflicted = "[!${count}](bold {{ .theme.red }})"
ahead = "[+${count}]({{ .theme.green }})"
behind = "[-${count}]({{ .theme.red }})"
diverged = "[+${ahead_count}/-${behind_count}]({{ .theme.yellow }})"
untracked = "[?${count}]({{ .theme.fg_dim }})"
stashed = "[*${count}]({{ .theme.blue }})"
modified = "[~${count}]({{ .theme.yellow }})"
staged = "[+${count}]({{ .theme.green }})"
renamed = "[r${count}]({{ .theme.accent }})"
deleted = "[x${count}]({{ .theme.red }})"

# Git state (rebase, merge, etc.)
[git_state]
format = '\([$state( $progress_current/$progress_total)]($style)\) '
style = "bold {{ .theme.yellow }}"
rebase = "rebase"
merge = "merge"
revert = "revert"
cherry_pick = "pick"
bisect = "bisect"
am = "am"
am_or_rebase = "am/rebase"

# Node.js
[nodejs]
format = "[$symbol($version)]($style) "
symbol = "node "
style = "{{ .theme.green }}"
detect_files = ["package.json", ".node-version", ".nvmrc"]
detect_folders = ["node_modules"]

# Rust
[rust]
format = "[$symbol($version)]($style) "
symbol = "rs "
style = "#f97e72"

# Python
[python]
format = '[${symbol}${pyenv_prefix}(${version})(\($virtualenv\))]($style) '
symbol = "py "
style = "{{ .theme.yellow }}"
pyenv_version_name = true

# Elixir
[elixir]
format = '[$symbol($version \(OTP $otp_version\))]($style) '
symbol = "ex "
style = "{{ .theme.accent }}"

# Go
[golang]
format = "[$symbol($version)]($style) "
symbol = "go "
style = "{{ .theme.blue }}"

# Docker
[docker_context]
format = "[$symbol$context]($style) "
symbol = "docker "
style = "{{ .theme.blue }}"
only_with_files = true

# AWS
[aws]
format = '[$symbol($profile)(\($region\))]($style) '
symbol = "aws "
style = "{{ .theme.yellow }}"
[aws.region_aliases]
us-east-1 = "use1"
us-west-2 = "usw2"
eu-west-1 = "euw1"

# Kubernetes
[kubernetes]
format = '[$symbol$context(\($namespace\))]($style) '
symbol = "k8s "
style = "{{ .theme.blue }}"
disabled = false
detect_files = ["k8s", "kubernetes", "kustomization.yaml"]

# Command duration
[cmd_duration]
format = "[$duration]($style) "
style = "{{ .theme.fg_dim }}"
min_time = 2_000
show_milliseconds = false

# Time
[time]
format = "[$time]($style)"
style = "{{ .theme.border }}"
disabled = false
time_format = "%H:%M"

# Username (only show in SSH or when not default user)
[username]
format = "[$user]($style)@"
style_user = "{{ .theme.accent }}"
style_root = "bold {{ .theme.red }}"
show_always = false

# Hostname (only show in SSH)
[hostname]
format = "[$hostname]($style) "
style = "{{ .theme.accent2 }}"
ssh_only = true
trim_at = "."

# Memory usage (disabled by default, enable if needed)
[memory_usage]
format = "[$symbol${ram}]($style) "
symbol = "mem "
style = "{{ .theme.fg_dim }}"
disabled = true
threshold = 75

# Battery (disabled by default)
[battery]
disabled = true

# Package version
[package]
format = "[$symbol$version]($style) "
symbol = "pkg "
style = "{{ .theme.fg_dim }}"
disabled = true

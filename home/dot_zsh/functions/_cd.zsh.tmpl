# shellcheck disable=all
# Smart cd wrapper for version manager auto-switching

{{- if or .nvm .asdf }}
cd() {
    builtin cd "$@" || return

    {{- if .asdf }}
    # asdf: auto-install if .tool-versions exists
    if [[ -f ".tool-versions" ]]; then
        asdf install &>/dev/null
    fi
    {{- end }}

    {{- if .nvm }}
    # nvm: auto-switch if .nvmrc exists
    if [[ -f ".nvmrc" ]]; then
        nvm use --silent
    fi
    {{- end }}
}
{{- end }}

# shellcheck disable=all
# Main zsh configuration for DROO's dotfiles
# This file contains chezmoi template syntax which will be processed by chezmoi

# Ruby/rbenv configuration (must be at top)
{{- if .rbenv -}}
export PATH="{{ .chezmoi.homeDir }}/.rbenv/shims:$PATH"
eval "$(rbenv init -)"
{{- end -}}

# Autoload completions
autoload -U compinit
compinit -i

# Oh My Zsh configuration
{{- if .ohmyzsh -}}
# Path to your oh-my-zsh installation.
export ZSH="{{ .chezmoi.homeDir }}/.oh-my-zsh"

# Set name of the theme to load
ZSH_THEME="robbyrussell"

# Which plugins would you like to load?
plugins=(git)

source $ZSH/oh-my-zsh.sh
{{- end -}}

# Load core configuration
source "{{ .chezmoi.homeDir }}/.zsh/core/config.zsh"

# Load centralized PATH management
source "{{ .chezmoi.homeDir }}/.zsh/core/paths.zsh"

# DappSnap - Automatically use the correct Node.js version
{{- if .nvm -}}
cd() { builtin cd "$@" && if [ -f ".nvmrc" ]; then nvm use; elif [ -d "node_modules" ]; then nvm use 23.4.0; fi }
# Initial setup for current directory
if [ -d "{{ .chezmoi.homeDir }}/Documents/CODE/dappsnap/node_modules" ]; then nvm use 23.4.0; fi
{{- end -}}

# Work-specific settings
{{- if .work -}}
export GIT_AUTHOR_EMAIL="{{ .email }}"
export GIT_COMMITTER_EMAIL="{{ .email }}"
export GITHUB_TOKEN=your_personal_access_token
# Add work-specific configs here
{{- end -}}

# GitHub token (if not in work mode)
{{- if not .work -}}
export GITHUB_TOKEN=your_personal_access_token
{{- end -}}